"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateredmine_epic_grid"]("main",{

/***/ "./assets/javascripts/epic_grid/src/components/Layout/TripleSplitLayout.tsx":
/*!**********************************************************************************!*\
  !*** ./assets/javascripts/epic_grid/src/components/Layout/TripleSplitLayout.tsx ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TripleSplitLayout: () => (/* binding */ TripleSplitLayout)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./assets/javascripts/epic_grid/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _TripleSplitLayout_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TripleSplitLayout.scss */ \"./assets/javascripts/epic_grid/src/components/Layout/TripleSplitLayout.scss\");\n\n\n// CSS変数から値を取得（px値）\nconst getCSSVariable = (name) => {\n    const value = getComputedStyle(document.documentElement).getPropertyValue(name).trim();\n    return parseFloat(value) * 16; // rem -> px変換\n};\nconst MIN_LEFT_WIDTH = 150;\nconst MAX_LEFT_WIDTH = 400;\nconst MIN_CENTER_WIDTH = 600;\nconst MIN_RIGHT_WIDTH = 400;\nconst MAX_RIGHT_WIDTH = 600;\nconst DEFAULT_LEFT_WIDTH = 230;\nconst DEFAULT_RIGHT_WIDTH = 450;\nconst STORAGE_KEY = 'epic_grid_triple_split_widths';\n/**\n * 3ペイン分割レイアウトコンポーネント\n *\n * 左サイドメニュー、中央グリッド、右詳細ペインの3つの領域を管理\n * 各ペインはドラッグ可能な分割バーでリサイズ可能\n * ペインの表示/非表示状態とサイズはLocalStorageに永続化\n */\nconst TripleSplitLayout = ({ leftPane, centerPane, rightPane, isLeftPaneVisible, isRightPaneVisible, onLeftPaneWidthChange, onRightPaneWidthChange }) => {\n    const [paneWidths, setPaneWidths] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        left: DEFAULT_LEFT_WIDTH,\n        right: DEFAULT_RIGHT_WIDTH\n    });\n    const [draggingPane, setDraggingPane] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const saveTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // LocalStorageから幅を復元\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        const saved = localStorage.getItem(STORAGE_KEY);\n        if (saved) {\n            try {\n                const parsed = JSON.parse(saved);\n                setPaneWidths({\n                    left: clamp(parsed.left, MIN_LEFT_WIDTH, MAX_LEFT_WIDTH),\n                    right: clamp(parsed.right, MIN_RIGHT_WIDTH, MAX_RIGHT_WIDTH)\n                });\n            }\n            catch (e) {\n                console.warn('Failed to parse saved pane widths', e);\n            }\n        }\n    }, []);\n    // 幅をLocalStorageに保存（デバウンス）\n    const savePaneWidths = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((widths) => {\n        if (saveTimerRef.current) {\n            clearTimeout(saveTimerRef.current);\n        }\n        saveTimerRef.current = setTimeout(() => {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(widths));\n        }, 300);\n    }, []);\n    // 左スプリッターのドラッグ開始\n    const handleLeftMouseDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e) => {\n        e.preventDefault();\n        setDraggingPane('left');\n    }, []);\n    // 右スプリッターのドラッグ開始\n    const handleRightMouseDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e) => {\n        e.preventDefault();\n        setDraggingPane('right');\n    }, []);\n    // ドラッグ中\n    const handleMouseMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e) => {\n        if (!draggingPane || !containerRef.current)\n            return;\n        const containerRect = containerRef.current.getBoundingClientRect();\n        const containerWidth = containerRect.width;\n        if (draggingPane === 'left') {\n            const newLeftWidth = e.clientX - containerRect.left;\n            const clampedWidth = clamp(newLeftWidth, MIN_LEFT_WIDTH, MAX_LEFT_WIDTH);\n            // 中央ペインの最小幅を確保\n            const maxAllowedLeftWidth = containerWidth - MIN_CENTER_WIDTH -\n                (isRightPaneVisible ? paneWidths.right : 0);\n            if (clampedWidth <= maxAllowedLeftWidth) {\n                const newWidths = { ...paneWidths, left: clampedWidth };\n                setPaneWidths(newWidths);\n                savePaneWidths(newWidths);\n                onLeftPaneWidthChange?.(clampedWidth);\n            }\n        }\n        else if (draggingPane === 'right') {\n            const newRightWidth = containerRect.right - e.clientX;\n            const clampedWidth = clamp(newRightWidth, MIN_RIGHT_WIDTH, MAX_RIGHT_WIDTH);\n            // 中央ペインの最小幅を確保\n            const maxAllowedRightWidth = containerWidth - MIN_CENTER_WIDTH -\n                (isLeftPaneVisible ? paneWidths.left : 0);\n            if (clampedWidth <= maxAllowedRightWidth) {\n                const newWidths = { ...paneWidths, right: clampedWidth };\n                setPaneWidths(newWidths);\n                savePaneWidths(newWidths);\n                onRightPaneWidthChange?.(clampedWidth);\n            }\n        }\n    }, [draggingPane, paneWidths, isLeftPaneVisible, isRightPaneVisible, savePaneWidths, onLeftPaneWidthChange, onRightPaneWidthChange]);\n    // ドラッグ終了\n    const handleMouseUp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n        setDraggingPane(null);\n    }, []);\n    // マウスイベントの登録\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        if (draggingPane) {\n            document.addEventListener('mousemove', handleMouseMove);\n            document.addEventListener('mouseup', handleMouseUp);\n            return () => {\n                document.removeEventListener('mousemove', handleMouseMove);\n                document.removeEventListener('mouseup', handleMouseUp);\n            };\n        }\n    }, [draggingPane, handleMouseMove, handleMouseUp]);\n    // スプリッターのダブルクリックでデフォルト幅に戻す\n    const handleLeftDoubleClick = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n        const newWidths = { ...paneWidths, left: DEFAULT_LEFT_WIDTH };\n        setPaneWidths(newWidths);\n        savePaneWidths(newWidths);\n        onLeftPaneWidthChange?.(DEFAULT_LEFT_WIDTH);\n    }, [paneWidths, savePaneWidths, onLeftPaneWidthChange]);\n    const handleRightDoubleClick = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n        const newWidths = { ...paneWidths, right: DEFAULT_RIGHT_WIDTH };\n        setPaneWidths(newWidths);\n        savePaneWidths(newWidths);\n        onRightPaneWidthChange?.(DEFAULT_RIGHT_WIDTH);\n    }, [paneWidths, savePaneWidths, onRightPaneWidthChange]);\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: `triple-split-layout ${draggingPane ? 'triple-split-layout--dragging' : ''}`, ref: containerRef },\n        isLeftPaneVisible && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null,\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__left\", style: { width: `${paneWidths.left}px` } }, leftPane),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__splitter triple-split-layout__splitter--left\", onMouseDown: handleLeftMouseDown, onDoubleClick: handleLeftDoubleClick, role: \"separator\", \"aria-orientation\": \"vertical\", \"aria-label\": \"\\u5DE6\\u30DA\\u30A4\\u30F3\\u306E\\u30EA\\u30B5\\u30A4\\u30BA\", title: \"\\u30C9\\u30E9\\u30C3\\u30B0\\u3057\\u3066\\u5E45\\u3092\\u8ABF\\u6574 (\\u30C0\\u30D6\\u30EB\\u30AF\\u30EA\\u30C3\\u30AF\\u3067\\u521D\\u671F\\u5024\\u306B\\u623B\\u3059)\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__splitter-handle\" })))),\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__center\" }, centerPane),\n        isRightPaneVisible && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null,\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__splitter triple-split-layout__splitter--right\", onMouseDown: handleRightMouseDown, onDoubleClick: handleRightDoubleClick, role: \"separator\", \"aria-orientation\": \"vertical\", \"aria-label\": \"\\u53F3\\u30DA\\u30A4\\u30F3\\u306E\\u30EA\\u30B5\\u30A4\\u30BA\", title: \"\\u30C9\\u30E9\\u30C3\\u30B0\\u3057\\u3066\\u5E45\\u3092\\u8ABF\\u6574 (\\u30C0\\u30D6\\u30EB\\u30AF\\u30EA\\u30C3\\u30AF\\u3067\\u521D\\u671F\\u5024\\u306B\\u623B\\u3059)\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__splitter-handle\" })),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"triple-split-layout__right\", style: { width: `${paneWidths.right}px` } }, rightPane)))));\n};\n/**\n * 値を最小値と最大値の間にクランプする\n */\nfunction clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n\n\n//# sourceURL=webpack://redmine_epic_grid/./assets/javascripts/epic_grid/src/components/Layout/TripleSplitLayout.tsx?\n}");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("0bed8ee18ecf763880a1")
/******/ })();
/******/ 
/******/ }
);