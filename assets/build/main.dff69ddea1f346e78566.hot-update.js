"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateredmine_epic_grid"]("main",{

/***/ "./assets/javascripts/epic_grid/src/components/FilterPanel.tsx":
/*!*********************************************************************!*\
  !*** ./assets/javascripts/epic_grid/src/components/FilterPanel.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FilterPanel: () => (/* binding */ FilterPanel)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./assets/javascripts/epic_grid/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _store_useStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../store/useStore */ \"./assets/javascripts/epic_grid/src/store/useStore.ts\");\n/* harmony import */ var _utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/naturalSort */ \"./assets/javascripts/epic_grid/src/utils/naturalSort.ts\");\n\n\n\n/**\n * FilterPanel Component\n *\n * Epic Gridのフィルタリング機能を提供するUIコンポーネント\n * - バージョン絞込（複数選択可能）\n * - 担当者絞込（複数選択可能）\n * - トラッカー絞込（複数選択可能）\n */\nconst FilterPanel = () => {\n    const entities = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.entities);\n    const metadata = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.metadata);\n    const filters = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.filters);\n    const setFilters = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.setFilters);\n    const clearFilters = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.clearFilters);\n    const excludeClosedVersions = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.excludeClosedVersions);\n    const toggleExcludeClosedVersions = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.toggleExcludeClosedVersions);\n    const hideEmptyEpicsVersions = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.hideEmptyEpicsVersions);\n    const toggleHideEmptyEpicsVersions = (0,_store_useStore__WEBPACK_IMPORTED_MODULE_1__.useStore)(state => state.toggleHideEmptyEpicsVersions);\n    const [isExpanded, setIsExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // ローカル状態（Apply前の一時的なフィルタ）\n    const [localFilters, setLocalFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(filters);\n    // バージョン期日フィルタのローカル状態\n    const [effectiveDateFrom, setEffectiveDateFrom] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(filters.fixed_version_effective_date_gteq || '');\n    const [effectiveDateTo, setEffectiveDateTo] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(filters.fixed_version_effective_date_lteq || '');\n    // バージョンリストを取得（自然順ソート）\n    const versions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        return Object.values(entities.versions).sort((a, b) => (0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.compareNaturalSort)((0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.naturalSortKey)(a.name), (0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.naturalSortKey)(b.name)));\n    }, [entities.versions]);\n    // ユーザーリストを取得（ID順）\n    const users = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        return Object.values(entities.users).sort((a, b) => a.id - b.id);\n    }, [entities.users]);\n    // ステータスリスト（環境依存、metadataから取得）\n    const statuses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        return metadata?.available_statuses || [];\n    }, [metadata?.available_statuses]);\n    // トラッカーリスト（環境依存、metadataから取得）\n    const trackers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        return metadata?.available_trackers || [];\n    }, [metadata?.available_trackers]);\n    // Epicリストを取得（フィルタ用・自然順ソート）\n    const epics = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        return Object.values(entities.epics).sort((a, b) => (0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.compareNaturalSort)((0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.naturalSortKey)(a.subject), (0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.naturalSortKey)(b.subject)));\n    }, [entities.epics]);\n    // Featureリストを取得（フィルタ用・自然順ソート）\n    const features = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        return Object.values(entities.features).sort((a, b) => (0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.compareNaturalSort)((0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.naturalSortKey)(a.title), (0,_utils_naturalSort__WEBPACK_IMPORTED_MODULE_2__.naturalSortKey)(b.title)));\n    }, [entities.features]);\n    // バージョン選択ハンドラー\n    const handleVersionChange = (versionId, checked) => {\n        setLocalFilters(prev => {\n            const currentVersions = prev.fixed_version_id_in || [];\n            const newVersions = checked\n                ? [...currentVersions, versionId]\n                : currentVersions.filter(id => id !== versionId);\n            return {\n                ...prev,\n                fixed_version_id_in: newVersions.length > 0 ? newVersions : undefined\n            };\n        });\n    };\n    // 担当者選択ハンドラー\n    const handleUserChange = (userId, checked) => {\n        setLocalFilters(prev => {\n            const currentUsers = prev.assigned_to_id_in || [];\n            const newUsers = checked\n                ? [...currentUsers, userId]\n                : currentUsers.filter(id => id !== userId);\n            return {\n                ...prev,\n                assigned_to_id_in: newUsers.length > 0 ? newUsers : undefined\n            };\n        });\n    };\n    // トラッカー選択ハンドラー\n    const handleTrackerChange = (trackerId, checked) => {\n        setLocalFilters(prev => {\n            const currentTrackers = prev.tracker_id_in || [];\n            const newTrackers = checked\n                ? [...currentTrackers, trackerId]\n                : currentTrackers.filter(id => id !== trackerId);\n            return {\n                ...prev,\n                tracker_id_in: newTrackers.length > 0 ? newTrackers : undefined\n            };\n        });\n    };\n    // ステータス選択ハンドラー\n    const handleStatusChange = (statusId, checked) => {\n        setLocalFilters(prev => {\n            const currentStatuses = prev.status_id_in || [];\n            const newStatuses = checked\n                ? [...currentStatuses, statusId]\n                : currentStatuses.filter(id => id !== statusId);\n            return {\n                ...prev,\n                status_id_in: newStatuses.length > 0 ? newStatuses : undefined\n            };\n        });\n    };\n    // Epic選択ハンドラー\n    const handleEpicChange = (epicId, checked) => {\n        setLocalFilters(prev => {\n            const currentEpics = prev.parent_id_in || [];\n            const newEpics = checked\n                ? [...currentEpics, epicId]\n                : currentEpics.filter(id => id !== epicId);\n            return {\n                ...prev,\n                parent_id_in: newEpics.length > 0 ? newEpics : undefined\n            };\n        });\n    };\n    // Feature選択ハンドラー\n    const handleFeatureChange = (featureId, checked) => {\n        setLocalFilters(prev => {\n            const currentFeatures = prev.parent_id_in || [];\n            const newFeatures = checked\n                ? [...currentFeatures, featureId]\n                : currentFeatures.filter(id => id !== featureId);\n            return {\n                ...prev,\n                parent_id_in: newFeatures.length > 0 ? newFeatures : undefined\n            };\n        });\n    };\n    // バージョン期日フィルタハンドラー\n    const handleEffectiveDateFromChange = (value) => {\n        setEffectiveDateFrom(value);\n        setLocalFilters(prev => ({\n            ...prev,\n            fixed_version_effective_date_gteq: value || undefined\n        }));\n    };\n    const handleEffectiveDateToChange = (value) => {\n        setEffectiveDateTo(value);\n        setLocalFilters(prev => ({\n            ...prev,\n            fixed_version_effective_date_lteq: value || undefined\n        }));\n    };\n    // フィルタ適用\n    const handleApply = () => {\n        setFilters(localFilters);\n        setIsExpanded(false);\n    };\n    // フィルタクリア\n    const handleClear = () => {\n        setLocalFilters({});\n        setEffectiveDateFrom('');\n        setEffectiveDateTo('');\n        clearFilters();\n        setIsExpanded(false);\n    };\n    // アクティブフィルタ数をカウント\n    const activeFilterCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n        let count = 0;\n        if (filters.fixed_version_id_in && filters.fixed_version_id_in.length > 0)\n            count++;\n        if (filters.assigned_to_id_in && filters.assigned_to_id_in.length > 0)\n            count++;\n        if (filters.tracker_id_in && filters.tracker_id_in.length > 0)\n            count++;\n        if (filters.status_id_in && filters.status_id_in.length > 0)\n            count++;\n        if (filters.parent_id_in && filters.parent_id_in.length > 0)\n            count++;\n        if (filters.fixed_version_effective_date_gteq || filters.fixed_version_effective_date_lteq)\n            count++;\n        return count;\n    }, [filters]);\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-panel\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", { className: \"filter-toggle-btn\", onClick: () => setIsExpanded(!isExpanded) },\n            \"\\uD83D\\uDD0D \\u30D5\\u30A3\\u30EB\\u30BF \",\n            activeFilterCount > 0 && `(${activeFilterCount})`),\n        isExpanded && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-dropdown\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: excludeClosedVersions, onChange: () => toggleExcludeClosedVersions() }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, \"\\u30AF\\u30ED\\u30FC\\u30BA\\u6E08\\u307F\\u30D0\\u30FC\\u30B8\\u30E7\\u30F3\\u3092\\u975E\\u8868\\u793A\"))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"\\u30D0\\u30FC\\u30B8\\u30E7\\u30F3\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-options\" }, versions.length > 0 ? (versions.map(version => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { key: version.id, className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: localFilters.fixed_version_id_in?.includes(version.id) || false, onChange: (e) => handleVersionChange(version.id, e.target.checked) }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, version.name))))) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"no-options\" }, \"\\u30D0\\u30FC\\u30B8\\u30E7\\u30F3\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\")))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"\\u30D0\\u30FC\\u30B8\\u30E7\\u30F3\\u671F\\u65E5\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-date-range\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-date-input\" },\n                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { htmlFor: \"effective-date-from\" }, \"\\u958B\\u59CB\\u65E5\"),\n                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { id: \"effective-date-from\", type: \"date\", value: effectiveDateFrom, onChange: (e) => handleEffectiveDateFromChange(e.target.value), placeholder: \"YYYY-MM-DD\" })),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: \"filter-date-separator\" }, \"\\u301C\"),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-date-input\" },\n                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { htmlFor: \"effective-date-to\" }, \"\\u7D42\\u4E86\\u65E5\"),\n                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { id: \"effective-date-to\", type: \"date\", value: effectiveDateTo, onChange: (e) => handleEffectiveDateToChange(e.target.value), placeholder: \"YYYY-MM-DD\" })))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"\\u62C5\\u5F53\\u8005\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-options\" }, users.length > 0 ? (users.map(user => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { key: user.id, className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: localFilters.assigned_to_id_in?.includes(user.id) || false, onChange: (e) => handleUserChange(user.id, e.target.checked) }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null,\n                        user.firstname,\n                        \" \",\n                        user.lastname))))) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"no-options\" }, \"\\u62C5\\u5F53\\u8005\\u304C\\u3044\\u307E\\u305B\\u3093\")))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"\\u30C8\\u30E9\\u30C3\\u30AB\\u30FC\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-options\" }, trackers.length > 0 ? (trackers.map(tracker => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { key: tracker.id, className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: localFilters.tracker_id_in?.includes(tracker.id) || false, onChange: (e) => handleTrackerChange(tracker.id, e.target.checked) }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, tracker.name))))) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"no-options\" }, \"\\u30C8\\u30E9\\u30C3\\u30AB\\u30FC\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\")))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-options\" }, statuses.length > 0 ? (statuses.map(status => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { key: status.id, className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: localFilters.status_id_in?.includes(status.id) || false, onChange: (e) => handleStatusChange(status.id, e.target.checked) }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, status.name))))) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"no-options\" }, \"\\u30B9\\u30C6\\u30FC\\u30BF\\u30B9\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\")))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"Epic\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-options\" }, epics.length > 0 ? (epics.map(epic => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { key: epic.id, className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: localFilters.parent_id_in?.includes(epic.id) || false, onChange: (e) => handleEpicChange(epic.id, e.target.checked) }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, epic.subject))))) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"no-options\" }, \"Epic\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\")))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-section\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h4\", null, \"Feature\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-options\" }, features.length > 0 ? (features.map(feature => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", { key: feature.id, className: \"filter-checkbox\" },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", { type: \"checkbox\", checked: localFilters.parent_id_in?.includes(feature.id) || false, onChange: (e) => handleFeatureChange(feature.id, e.target.checked) }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, feature.title))))) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", { className: \"no-options\" }, \"Feature\\u304C\\u3042\\u308A\\u307E\\u305B\\u3093\")))),\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"filter-actions\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", { className: \"filter-apply-btn\", onClick: handleApply }, \"\\u9069\\u7528\"),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", { className: \"filter-clear-btn\", onClick: handleClear }, \"\\u30AF\\u30EA\\u30A2\"))))));\n};\n\n\n//# sourceURL=webpack://redmine_epic_grid/./assets/javascripts/epic_grid/src/components/FilterPanel.tsx?\n}");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("c1ff93b04204b54b8119")
/******/ })();
/******/ 
/******/ }
);