# コマンド実行規約定義
# 危険なコマンドや確認が必要なコマンドに対して適用される規約を定義します
# ClaudeCodeがこれらのコマンドを実行する際に、規約確認を促します

rules:
  - name: "Git操作規約"
    patterns:
      - "git*"
    severity: "block"  # block: 完全ブロック, warn: 警告のみ
    token_threshold: 25000
    message: |
      Git操作を実行する場合は、@vibes/docs/rules/git_operation_standards.md をよく確認し従うこと
      作業を続けるためには､上記ドキュメントを確認したことを示してください

  - name: "Rails Scaffold操作確認"
    patterns:
      - "rails generate scaffold*"
      - "bin/rails generate scaffold*"
      - "bundle exec rails generate scaffold*"
      - "rails g scaffold*"
      - "bin/rails g scaffold*"
      - "bundle exec rails g scaffold*"
    severity: "warn"
    token_threshold: 35000
    message: |
      scaffoldを実行する場合は､@vibes/docs/rules/migration_standards.md をよく確認し従うこと
      作業を続けるためには､上記ドキュメントを確認したことを示してください

  - name: "Docker操作規約"
    patterns:
      - "docker*"
      - "docker-compose*"
    severity: "warn"
    token_threshold: 40000
    message: |
      Rails設定YAMLはプロジェクトオーナー管轄です
      微調整レベルの変更のみ許可されています